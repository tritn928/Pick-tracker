<div x-data>
    <div class="flex justify-between items-center">
        <div class="flex items-center">
            <img src="{{ (item.team.image if item.team else item.player.image) or 'https://placehold.co/40x40/334155/e2e8f0?text=?' }}" alt="Logo" class="h-8 w-8 rounded-full object-cover mr-3">
            <span class="font-bold text-slate-700 dark:text-slate-200">{{ item.team.name if item.team else item.player.name }}</span>
        </div>
        <button type="button" @click="handleTrackRequest('{{ url_for('untrack_item', item_id=item.id) }}').then(success => { if(success) $el.closest('li').remove(); })" class="bg-slate-600 hover:bg-red-600 text-white font-semibold py-1 px-3 text-xs rounded-md transition">Untrack</button>
    </div>
    {% if item.event %}
        <div class="mt-2 text-sm text-slate-600 dark:text-slate-300">
            <p><strong>Event:</strong> {{ item.event.team_one }} vs {{ item.event.team_two }}</p>
            <p id="status-{{ item.id }}"><strong>Status:</strong> <span class="font-semibold">{{ item.event.state }}</span></p>
            
            {% if item.event.state == 'unstarted' %}
                <div x-data="countdown('{{ item.event.start_time }}')" x-init="init()">
                    <p><strong>Starts In:</strong> <span x-text="display" class="font-semibold text-blue-400"></span></p>
                </div>
            {% else %}
                {% set match_data = item.display_data %}
                {% if match_data %}
                    {% if item.event.league.sport.name == 'League of Legends' %}
                        {% include 'partials/lol_stats_display.html' %}
                    {% elif item.event.league.sport.name == 'Baseball' %}
                        {% include 'partials/mlb_stats_display.html' %}
                    {% endif %}
                {% endif %}
            {% endif %}
            <a href="{{ url_for('show_event', id=item.event.id) }}" class="inline-block mt-2 text-blue-500 hover:text-blue-400 font-semibold">View Match Details &rarr;</a>
        </div>
    {% endif %}
</div>