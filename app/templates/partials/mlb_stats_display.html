<div class="mt-2 text-sm text-slate-600 dark:text-slate-300">
    {% if item.player %}
        {# Logic for a tracked player: Show only their stats #}
        {% set player_id_to_find = item.player.id %}
        {% set p_stat = none %}
        {% if match_data.home_team and player_id_to_find in match_data.home_team.players %}
            {% set p_stat = match_data.home_team.players.get(player_id_to_find) %}
        {% elif match_data.away_team and player_id_to_find in match_data.away_team.players %}
            {% set p_stat = match_data.away_team.players.get(player_id_to_find) %}
        {% endif %}

        {% if p_stat %}
        <div class="font-mono text-xs p-2 bg-slate-900/50 rounded">
            <span id="item-{{ item.id }}-summary" class="font-semibold">{{ p_stat.summary }}</span>
        </div>
        {% endif %}

    {% elif item.team %}
        {# Logic for a tracked team: Show the full box score #}
        <div class="mt-4 space-y-4">
            <div class="border-t border-slate-300 dark:border-slate-600 pt-2">
                <h4 class="text-sm font-bold text-slate-600 dark:text-slate-400 mb-2">Box Score</h4>
                <div class="grid grid-cols-2 gap-x-4">
                    <!-- Away Team -->
                    <div class="p-2 {% if match_data.away_team.id == item.team.id %}bg-blue-900/60 rounded-md{% endif %}">
                        <h5 class="text-xs font-semibold text-center mb-1 {% if match_data.away_team.id == item.team.id %}text-white{% endif %}">{{ match_data.away_team.name }}</h5>
                        <table class="w-full text-xs text-center"><tbody>
                            {% for player_id, player_stats in match_data.away_team.players.items() %}
                            <tr class="border-b border-transparent">
                                <td class="text-left py-1 px-2">{{ player_stats.name }}</td>
                                <td class="text-right py-1 px-2">{{ player_stats.summary }}</td>
                            </tr>
                            {% endfor %}
                        </tbody></table>
                    </div>
                    <!-- Home Team -->
                    <div class="p-2 {% if match_data.home_team.id == item.team.id %}bg-blue-900/60 rounded-md{% else %}border-l border-slate-300 dark:border-slate-600 pl-4{% endif %}">
                        <h5 class="text-xs font-semibold text-center mb-1 {% if match_data.home_team.id == item.team.id %}text-white{% endif %}">{{ match_data.home_team.name }}</h5>
                        <table class="w-full text-xs text-center"><tbody>
                            {% for player_id, player_stats in match_data.home_team.players.items() %}
                            <tr class="border-b border-transparent">
                                <td class="text-left py-1 px-2">{{ player_stats.name }}</td>
                                <td class="text-right py-1 px-2">{{ player_stats.summary }}</td>
                            </tr>
                            {% endfor %}
                        </tbody></table>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>