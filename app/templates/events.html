{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="mb-6">
        <a href="{{ url_for('leagues') }}" class="text-blue-400 hover:underline">&larr; Back to Leagues</a>
        <h1 class="text-3xl font-extrabold text-white mt-2">{{ league.name }} Schedule</h1>
    </div>

    <div class="mb-12">
        <h2 class="text-xl font-semibold text-slate-300 mb-4">In Progress</h2>
        <div class="space-y-4">
            {% if inProgress_events %}
                {% for event in inProgress_events %}
                    <a href="/events/{{event.id}}" class="block bg-slate-800 hover:bg-slate-700/80 p-4 rounded-lg shadow-md transition duration-200">
                        <p class="text-sm text-slate-400 mb-2">{{ event.start_time }}</p>
                        <div class="grid grid-cols-[1fr_auto_1fr] items-center gap-4">
                            <div class="flex items-center gap-3 justify-end">
                                <span class="font-bold text-white text-right">{{ event.team_one }}</span>
                                {% if event.match and event.match.match_teams and event.match.match_teams|length > 0 %}
                                    <img src="{{ event.match.match_teams[0].image }}" alt="{{ event.team_one }} Logo" class="h-8 w-8 object-contain">
                                {% endif %}
                            </div>
                            <div class="text-center text-slate-400 font-bold">vs</div>
                            <div class="flex items-center gap-3">
                                {% if event.match and event.match.match_teams and event.match.match_teams|length > 1 %}
                                    <img src="{{ event.match.match_teams[1].image }}" alt="{{ event.team_two }} Logo" class="h-8 w-8 object-contain">
                                {% endif %}
                                <span class="font-bold text-white">{{ event.team_two }}</span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            {% else %}
                <p class="text-slate-500">No events in progress for this league.</p>
            {% endif %}
        </div>
    </div>

    <div class="mb-12">
        <h2 class="text-xl font-semibold text-slate-300 mb-4">Upcoming</h2>
        <div class="space-y-4">
            {% if unstarted_events %}
                {% for event in unstarted_events %}
                     <a href="/events/{{event.id}}" class="block bg-slate-800 hover:bg-slate-700/80 p-4 rounded-lg shadow-md transition duration-200">
                        <p class="text-sm text-slate-400 mb-2">{{ event.start_time }}</p>
                        <div class="grid grid-cols-[1fr_auto_1fr] items-center gap-4">
                            <div class="flex items-center gap-3 justify-end">
                                <span class="font-bold text-white text-right">{{ event.team_one }}</span>
                                {% if event.match and event.match.match_teams and event.match.match_teams|length > 0 %}
                                    <img src="{{ event.match.match_teams[0].image }}" alt="{{ event.team_one }} Logo" class="h-8 w-8 object-contain">
                                {% endif %}
                            </div>
                            <div class="text-center text-slate-400 font-bold">vs</div>
                            <div class="flex items-center gap-3">
                                {% if event.match and event.match.match_teams and event.match.match_teams|length > 1 %}
                                    <img src="{{ event.match.match_teams[1].image }}" alt="{{ event.team_two }} Logo" class="h-8 w-8 object-contain">
                                {% endif %}
                                <span class="font-bold text-white">{{ event.team_two }}</span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            {% else %}
                <p class="text-slate-500">No upcoming events for this league.</p>
            {% endif %}
        </div>
    </div>

    <div class="mt-8">
        <h2 class="text-xl font-semibold text-slate-300 mb-4">Completed</h2>
        <div class="space-y-4">
            {% if completed_events %}
                {% for event in completed_events %}
                    <a href="/events/{{event.id}}" class="block bg-slate-800/80 hover:bg-slate-700/80 p-4 rounded-lg shadow-md transition duration-200 opacity-70">
                        <p class="text-sm text-slate-400 mb-2">{{ event.start_time }}</p>
                        <div class="grid grid-cols-[1fr_auto_1fr] items-center gap-4">
                             <div class="flex items-center gap-3 justify-end">
                                <span class="font-bold text-white text-right">{{ event.team_one }}</span>
                                {% if event.match and event.match.match_teams and event.match.match_teams|length > 0 %}
                                    <img src="{{ event.match.match_teams[0].image }}" alt="{{ event.team_one }} Logo" class="h-8 w-8 object-contain">
                                {% endif %}
                            </div>
                            <div class="text-center text-slate-400 font-bold">vs</div>
                            <div class="flex items-center gap-3">
                                {% if event.match and event.match.match_teams and event.match.match_teams|length > 1 %}
                                    <img src="{{ event.match.match_teams[1].image }}" alt="{{ event.team_two }} Logo" class="h-8 w-8 object-contain">
                                {% endif %}
                                <span class="font-bold text-white">{{ event.team_two }}</span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            {% else %}
                <p class="text-slate-500">No completed events for this league.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}